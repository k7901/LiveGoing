
<div>
  <%= form_with url: hotels_path, method: :get, local: :true  do |form| %>
    会場
    <%= form.text_field :venue,id: 'searchInput', name: 'search[venue]' %>
    <%#= form.number_field :amount, name: 'search[amount]', min: 1 %>
    <%#= form.number_field :guest, name: 'search[guest]', min: 1 %>
    <%= form.submit "検索" %>
  <% end %>
</div>

<!-- モーダルウィンドウ -->
<!-- 地域選択モーダル -->
<div class="modal fade" id="regionModal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">地域を選択</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <!-- 地域の選択リスト -->
        <ul id="regionSelect" class="list-group">
          <% Region.all.each do |region| %>
            <li class="list-group-item list-group-item-action" data-region-id="<%= region.id %>"><%= region.name %></li>
          <% end %>
        </ul>
      </div>
    </div>
  </div>
</div>
<!-- 都道府県選択モーダル -->
<div class="modal" id="prefectureModal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">都道府県を選択</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <!-- 都道府県の選択リスト -->
        <select id="prefectureSelect" class="form-control">
          <% Prefecture.all.each do |prefecture| %>
            <option value="<%= prefecture.id %>"><%= prefecture.name %></option>
          <% end %>
        </select>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-dismiss="modal">選択</button>
      </div>
    </div>
  </div>
</div>
<!-- 会場選択モーダル -->
<div class="modal" id="venueModal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">会場を選択</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <!-- 会場の選択リスト（初期状態では空） -->
        <select id="venueSelect" class="form-control">
          <!-- オプションはAjaxで動的に追加 -->
        </select>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-dismiss="modal">選択</button>
      </div>
    </div>
  </div>
</div>


<script>
 $(document).ready(function() {
  $('#searchInput').click(function() {
    $('#regionModal').modal('show');
  });

  $('#regionModal .list-group-item').click(function() {
    var selectedRegionId = $(this).data('region-id');
    // Ajaxリクエストを使用して都道府県リストを取得
    $.get('/prefectures_for_region', { region_id: selectedRegionId }, function(prefectures) {
      $('#prefectureSelect').empty(); // 以前の選択肢をクリア
      $.each(prefectures, function(index, prefecture) {
        $('#prefectureSelect').append(new Option(prefecture.name, prefecture.id));
      });
      $('#regionModal').modal('hide');
      $('#prefectureModal').modal('show');
    });
  });
  $('#prefectureModal .btn-primary').click(function() {
    var selectedPrefectureId = $('#prefectureSelect').val();
    // Ajaxリクエストを使用して会場リストを取得
    $.get('/venues_for_prefecture', { prefecture_id: selectedPrefectureId }, function(venues) {
      $('#venueSelect').empty(); // 以前の選択肢をクリア
      $.each(venues, function(index, venue) {
        $('#venueSelect').append(new Option(venue.name, venue.id));
      });
      $('#venueModal').modal('show');  //会場選択モーダルを表示
    });
  });

  $('#venueModal .btn-primary').click(function() {
    var selectedVenue = $('#venueSelect').val();
    $('#searchInput').val($('#venueSelect option:selected').text());
  });
});
</script>

<%= link_to "管理画面ログイン", new_admin_session_path, class: "btn font-bold", style: "color: #48120E;"%>


